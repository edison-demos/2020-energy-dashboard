(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{233:function(t,e,r){var content=r(385);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(50).default)("7b600341",content,!0,{sourceMap:!1})},234:function(t,e,r){var content=r(387);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(50).default)("5e0b8680",content,!0,{sourceMap:!1})},383:function(t,e,r){t.exports=r.p+"img/icon-title.8a71b85.png"},384:function(t,e,r){"use strict";var o=r(233);r.n(o).a},385:function(t,e,r){(e=r(49)(!1)).push([t.i,'.b-icon[data-v-8f97bd54]{margin-left:7px}.s-name[data-v-8f97bd54]{margin-top:30px;text-decoration:underline;display:inline}.content-out .content-in[data-v-8f97bd54]{padding:30px;background-color:#e6e6e6;border-radius:10px}ul[data-v-8f97bd54]{list-style:none;padding-left:17px}ul li[data-v-8f97bd54]:before{content:"•";font-weight:700;display:inline-block;width:12px;margin-left:-1em;transform:scale(1.3);color:#708090}ul li.red[data-v-8f97bd54]:before{color:red}ul li.blue[data-v-8f97bd54]:before{color:#00f}ul li.orange[data-v-8f97bd54]:before{color:orange}ul li.green[data-v-8f97bd54]:before{color:green}.o-row[data-v-8f97bd54]{padding-top:23px}.info[data-v-8f97bd54]{line-height:30px}.area[data-v-8f97bd54]{margin-top:10px}.pie-v[data-v-8f97bd54]{position:absolute;top:40%;left:42%}',""]),t.exports=e},386:function(t,e,r){"use strict";var o=r(234);r.n(o).a},387:function(t,e,r){(e=r(49)(!1)).push([t.i,".m-bar[data-v-79232690]{border-radius:0}.m-bar .m-bar-value[data-v-79232690]{border-right:1px solid}",""]),t.exports=e},398:function(t,e,r){"use strict";r.r(e);r(9);var o={props:["max","value","variant"],computed:{p1v:function(){return"---"===this.value?0:Number(this.value)<this.max/3?this.value:this.max/3},p2v:function(){return"---"===this.value?0:Number(this.value)<.66*this.max?this.value-this.max/3:this.max/3},p3v:function(){return"---"===this.value?0:Number(this.value)-2*this.max/3}}},n=(r(386),r(34)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-progress",{staticClass:"m-bar",attrs:{value:t.value,max:t.max}},[r("b-progress-bar",{staticClass:"m-bar-value",attrs:{variant:t.variant,value:t.p1v}}),r("b-progress-bar",{staticClass:"m-bar-value",attrs:{variant:t.variant,value:t.p2v}}),r("b-progress-bar",{staticClass:"m-bar-value",attrs:{variant:t.variant,value:t.p3v}})],1)}),[],!1,null,"79232690",null);e.default=component.exports},399:function(t,e,r){"use strict";r.r(e);var o=r(229),n={mixins:[o.c.reactiveProp],extends:o.a,props:["options"],mounted:function(){this.renderLineChart()},methods:{renderLineChart:function(){this.renderChart(this.chartData,this.options)}},watch:{options:{deep:!0,handler:function(){this.renderChart(this.chartData,this.options)}}}},l=r(34),component=Object(l.a)(n,void 0,void 0,!1,null,null,null);e.default=component.exports},410:function(t,e,r){"use strict";r.r(e);r(48),r(35),r(42),r(12),r(18),r(19),r(5),r(2),r(3),r(1),r(4);var o=r(0),n=r(56),l=r(228);function c(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return l=t.done,t},e:function(t){c=!0,n=t},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw n}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={head:function(){return{meta:[{name:"viwport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}]}},computed:f(f({},Object(n.b)(["regions","status","config"])),{},{fullRegion:function(){return this.regions[0]},factors:function(){var t=this;return this.fullRegion.gears.map((function(g){return t.status[g.id]&&t.status[g.id].control_gear_power_factor}))},ACData:function(){var t=0,e=0,r=0,o=0,n=0,l=0,v=0,d=0;if(!this.fullRegion)return{};var f,h=c(this.fullRegion.gears);try{for(h.s();!(f=h.n()).done;){var _=f.value.id,C=this.status[_];C&&!C.isDC&&(l++,C.control_gear_voltage<1e3&&(t+=C.control_gear_voltage,e+=C.control_gear_voltage_frequence,v++),C.control_gear_power_factor>0&&(r+=C.control_gear_power_factor,d++),o+=C.active_power,n+=C.loadside_power)}}catch(t){h.e(t)}finally{h.f()}return{count:l,vin:v?(t/v).toFixed(1):"---",vf:v?e/v.toFixed(1):"---",pf:r/d,pin:o.toFixed(1),pout:n.toFixed(1)}},DCData:function(){var t=0,e=0,r=0,o=0;if(!this.fullRegion)return{};var n,l=c(this.fullRegion.gears);try{for(l.s();!(n=l.n()).done;){var v=n.value.id,d=this.status[v];d&&d.isDC&&(o++,t+=d.control_gear_voltage,e+=d.active_power,r+=d.loadside_power)}}catch(t){l.e(t)}finally{l.f()}return{count:o,vin:(t/o).toFixed(1),pin:e.toFixed(1),pout:r.toFixed(1)}},acChartDs:function(){return{datasets:[{backgroundColor:["green","slategray"],data:[this.ACData.pout,(this.ACData.pin-this.ACData.pout).toFixed(1)]}],labels:["損耗","輸出功率"]}},dcChartDs:function(){return{datasets:[{backgroundColor:["green","slategray"],data:[this.DCData.pout,(this.DCData.pin-this.DCData.pout).toFixed(1)]}],labels:["損耗","輸出功率"]}}}),methods:{isStatusOn:function(t){var e,r=t.gears,o=c(void 0===r?[]:r);try{for(o.s();!(e=o.n()).done;){var n=e.value.id;if(this.status[n])if(0!==this.status[n].device_arc)return!0}}catch(t){o.e(t)}finally{o.f()}return!1},parseEachRegionData:function(t){var e,r=0,o=0,n=0,v=0,d=0,f=0,h=0,_=0,C=0,m=0,D=0,w=0,x=0,y=!1,R=c(t.gears);try{for(R.s();!(e=R.n()).done;){var O=e.value,P=O.id,E=O.power_out,F=O.power_in,j=24*E,A=this.status[P];this.status[P]&&(d<A.startCount&&(d=A.startCount),A.isDC?o+=A.control_gear_voltage:r+=A.control_gear_voltage,A.powerRatio>0&&(D+=A.powerRatio,w++),0!==A.device_status&&(y=!0),m+=F,C+=E,n+=A.active_power,v+=A.loadside_power,f+=A.onTimeRate,_+=l.a[A.device_arc],x+=A.energyUsage/j,h++)}}catch(t){R.e(t)}finally{R.f()}return{isDC:o>r,vac:0==h?"---":(r/h).toFixed(1),vdc:0==h?"---":(o/h).toFixed(1),pin:0==h?"---":(n/h).toFixed(1),pout:0==h?"---":(v/h).toFixed(1),arc:0==h?"---":(_/h).toFixed(0),startCount:d,onTimeRate:0===f?"---":(f/h*100).toFixed(1),energyUsageRate:0===h?0:(100*x/h).toFixed(1),powerRate:0===D?"---":(100*D/w).toFixed(1),maxPin:m,maxPout:C,error:y}}},data:function(){return{showPF:!1,loading:!0,chartTitle:"耗能報告",chartOptions:{hoverBorderWidth:20,legend:{display:!1}}}}},_=(r(384),r(34)),component=Object(_.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-row",[o("b-col",[o("h2",{staticClass:"s-name"},[t._v(t._s(t.config?t.config.name:"Loading"))]),o("b-img",{staticStyle:{width:"100px"},attrs:{src:r(383)}})],1)],1),o("div",{staticClass:"content-out"},[o("div",{staticClass:"content-in"},[o("b-row",[o("b-col",[o("h3",[t._v("全區域")])])],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("場域交流資訊:")]),o("ul",[o("li",[t._v("損耗")]),o("li",{staticClass:"green"},[t._v("輸出功率")])])]),o("b-col",{attrs:{cols:"2"}},[o("PieChart",{attrs:{"chart-data":t.acChartDs,options:t.chartOptions}}),o("div",{staticClass:"pie-v"},[t._v(t._s((t.ACData.pout/t.ACData.pin*100).toFixed(0))+"%")])],1),o("b-col",{attrs:{cols:"",offset:"1"}},[o("div",{staticClass:"info"},[t._v("AC 輸入裝置 (共"+t._s(t.ACData.count)+"顆裝置)")]),o("div",{staticClass:"info"},[t._v("輸入電壓: "+t._s(t.ACData.vin)+" V")]),o("div",{staticClass:"info"},[t._v("輸入電壓頻率: "+t._s(t.ACData.vf)+" Hz")]),o("div",{staticClass:"info",on:{dblclick:function(e){t.showPF=!t.showPF}}},[t._v("功率因素 "+t._s(t.ACData.pf))]),t.showPF?o("div",{staticClass:"info hidden"},[t._v(t._s(t.factors))]):t._e(),o("div",{staticClass:"info"},[t._v("輸入功率: "+t._s(t.ACData.pin)+" W")]),o("div",{staticClass:"info"},[t._v("負載功率: "+t._s(t.ACData.pout)+" W")])])],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("場域直流資訊:")]),o("ul",[o("li",[t._v("損耗")]),o("li",{staticClass:"green"},[t._v("輸出功率")])])]),o("b-col",{attrs:{cols:"2"}},[o("PieChart",{attrs:{"chart-data":t.dcChartDs,options:t.chartOptions}}),o("div",{staticClass:"pie-v"},[t._v(t._s((t.DCData.pout/t.DCData.pin*100).toFixed(0))+"%")])],1),o("b-col",{attrs:{cols:"",offset:"1"}},[o("div",{staticClass:"info"},[t._v("DC 輸入裝置 (共 "+t._s(t.DCData.count)+" 顆裝置)")]),o("div",{staticClass:"info"},[t._v("輸入電壓: "+t._s(t.DCData.vin)+" V")]),o("div",{staticClass:"info"},[t._v("輸入功率: "+t._s(t.DCData.pin)+" W")]),o("div",{staticClass:"info"},[t._v("負載功率: "+t._s(t.DCData.pout)+" W")])])],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("區域當前狀態:")])]),o("b-col",[o("b-row",t._l(t.regions,(function(e){return e.id?o("b-col",{key:e.id,staticClass:"area",attrs:{cols:"3"}},[o("div",{staticClass:"area-name"},[t._v(t._s(e.name))]),t.isStatusOn(e)?o("b-icon",{attrs:{icon:"brightness-high"}},[o("span",[t._v("  ("+t._s(t.parseEachRegionData(e).arc)+" %)")])]):o("b-icon",{attrs:{icon:"circle-fill"}}),o("NuxtLink",{attrs:{to:"/error"}}),t.parseEachRegionData(e).error?o("b-icon",{attrs:{icon:"exclamation-triangle"}}):t._e()],1):t._e()})),1)],1)],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("區域單日使用率:")]),o("ul",[o("li",{staticClass:"orange"},[t._v("燈具使用次數")]),o("li",{staticClass:"green"},[t._v("燈具時間使用率")]),o("li",{staticClass:"blue"},[t._v("燈具使用功耗率")])])]),o("b-col",[o("b-row",t._l(t.regions,(function(e){return e.id?o("b-col",{key:e.id,staticClass:"area",attrs:{cols:"4"}},[o("div",{staticClass:"area-name"},[t._v(t._s(e.name))]),o("ProgressBar",{attrs:{variant:"warning",max:"10",value:t.parseEachRegionData(e).startCount<10?t.parseEachRegionData(e).startCount:10}}),o("ProgressBar",{attrs:{variant:"success",max:"100",value:t.parseEachRegionData(e).onTimeRate}}),o("ProgressBar",{attrs:{variant:"primary",max:"100",value:t.parseEachRegionData(e).energyUsageRate}}),o("ul",[o("li",{staticClass:"orange"},[t._v(t._s(t.parseEachRegionData(e).startCount)+" 次")]),o("li",{staticClass:"green"},[t._v(t._s(t.parseEachRegionData(e).onTimeRate)+" %")]),o("li",{staticClass:"blue"},[t._v(t._s(t.parseEachRegionData(e).energyUsageRate)+" %")])])],1):t._e()})),1)],1)],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("區域輸入電壓:")])]),o("b-col",[o("b-row",t._l(t.regions,(function(e){return e.id?o("b-col",{key:e.id,staticClass:"area",attrs:{cols:"4"}},[o("div",{staticClass:"area-name"},[t._v(t._s(e.name))]),t.parseEachRegionData(e).isDC?o("div",{staticClass:"vol"},[t._v("直流電壓: "+t._s(t.parseEachRegionData(e).vdc)+" V")]):o("div",{staticClass:"vol"},[t._v("交流電壓: "+t._s(t.parseEachRegionData(e).vac)+" V")])]):t._e()})),1)],1)],1),o("b-row",{staticClass:"o-row"},[o("b-col",{attrs:{cols:"3"}},[o("div",[t._v("區域使用功率:")]),o("ul",[o("li",{staticClass:"orange"},[t._v("輸入功率")]),o("li",{staticClass:"green"},[t._v("負載功率")])])]),o("b-col",[o("b-row",t._l(t.regions,(function(e){return e.id?o("b-col",{key:e.id,staticClass:"area",attrs:{cols:"4"}},[o("div",{staticClass:"area-name"},[t._v(t._s(e.name))]),o("ProgressBar",{attrs:{variant:"warning",max:t.parseEachRegionData(e).maxPin,value:t.parseEachRegionData(e).pin}}),o("ProgressBar",{attrs:{variant:"success",max:t.parseEachRegionData(e).maxPout,value:t.parseEachRegionData(e).pout}}),o("ul",[o("li",{staticClass:"orange"},[t._v(t._s(t.parseEachRegionData(e).pin)+" w")]),o("li",{staticClass:"green"},[t._v(t._s(t.parseEachRegionData(e).pout)+" w")])])],1):t._e()})),1)],1)],1)],1)])],1)}),[],!1,null,"8f97bd54",null);e.default=component.exports;installComponents(component,{PieChart:r(399).default,ProgressBar:r(398).default})}}]);